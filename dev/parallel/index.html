<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Parallel Simulation · DiscreteEventsCompanion.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">DiscreteEventsCompanion.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../DES/">Discrete Event Systems</a></li><li><a class="tocitem" href="../clocks/">Clocks</a></li><li><a class="tocitem" href="../actions/">Actions</a></li><li><a class="tocitem" href="../sampling/">Sampling</a></li><li><a class="tocitem" href="../events/">Events</a></li><li><a class="tocitem" href="../activities/">Activities</a></li><li><a class="tocitem" href="../processes/">Processes</a></li><li><a class="tocitem" href="../random/">Randomness</a></li><li><a class="tocitem" href="../automata/">State Machines</a></li><li><a class="tocitem" href="../actors/">Actors</a></li><li><a class="tocitem" href="../models/">Models</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../examples/examples/">Overview</a></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Introductory</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../examples/singleserver/">Single Server</a></li><li><a class="tocitem" href="../examples/tabletennis/">Table Tennis</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">M/M/c Queue</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../examples/queue_mmc_act/">M/M/c Activities</a></li><li><a class="tocitem" href="../examples/queue_mmc_srv/">M/M/c Processes</a></li><li><a class="tocitem" href="../examples/queue_mmc_sm/">M/M/c State Machines</a></li><li><a class="tocitem" href="../examples/queue_mmc_actor/">M/M/c Actors</a></li><li><a class="tocitem" href="../examples/queue_mmc_srv_fail/">M/M/c Interrupted Processes</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-4" type="checkbox"/><label class="tocitem" for="menuitem-3-4"><span class="docs-label">Multi-Threading (Experimental)</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../examples/assy_thrd/">Assembly Line</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-5" type="checkbox"/><label class="tocitem" for="menuitem-3-5"><span class="docs-label">Other</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../examples/house_heating/house_heating/">House Heating</a></li><li><a class="tocitem" href="../examples/postoffice/postoffice/">Post Office</a></li><li><a class="tocitem" href="../examples/dicegame/dicegame/">Goldratt&#39;s Dice Game</a></li></ul></li></ul></li><li><a class="tocitem" href="../performance/">Performance</a></li><li class="is-active"><a class="tocitem" href>Parallel Simulation</a><ul class="internal"><li><a class="tocitem" href="#Distributed-Simulations"><span>Distributed Simulations</span></a></li><li><a class="tocitem" href="#multi-threading"><span>Multi-Threading (Experimental)</span></a></li><li><a class="tocitem" href="#Thread-local-Time"><span>Thread-local Time</span></a></li></ul></li><li><a class="tocitem" href="../benchmarks/">Benchmarks</a></li><li><a class="tocitem" href="../diag/">Diagnosis</a></li><li><a class="tocitem" href="../internals/">Internals</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Parallel Simulation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Parallel Simulation</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/pbayer/DiscreteEventsCompanion.jl/blob/master/docs/src/parallel.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Parallel-Simulation"><a class="docs-heading-anchor" href="#Parallel-Simulation">Parallel Simulation</a><a id="Parallel-Simulation-1"></a><a class="docs-heading-anchor-permalink" href="#Parallel-Simulation" title="Permalink"></a></h1><p>Currently <code>DiscreteEvents.jl</code> supports two approaches to parallel simulations.</p><h2 id="Distributed-Simulations"><a class="docs-heading-anchor" href="#Distributed-Simulations">Distributed Simulations</a><a id="Distributed-Simulations-1"></a><a class="docs-heading-anchor-permalink" href="#Distributed-Simulations" title="Permalink"></a></h2><p>Several simulations can be executed in parallel on</p><ul><li>multiple cores of one machine using the <a href="https://docs.julialang.org/en/v1/manual/multi-threading/#The-@threads-Macro"><code>@threads</code>- macro</a> or on</li><li>multiple processes, potentially on different machines using the <a href="https://docs.julialang.org/en/v1/manual/distributed-computing/"><code>Distributed</code></a> library.</li></ul><p>They then have different clocks with different times. This approach is useful if you do multiple simulations to investigate their response to parameter variation or for machine learning.</p><p>See the <a href="../examples/dicegame/dicegame/">dice game example</a>.</p><h2 id="multi-threading"><a class="docs-heading-anchor" href="#multi-threading">Multi-Threading (Experimental)</a><a id="multi-threading-1"></a><a class="docs-heading-anchor-permalink" href="#multi-threading" title="Permalink"></a></h2><p><code>DiscreteEvents</code> introduces with <code>v0.3</code> and some cautions a way to distribute the computation of one simulation over multiple cores of one machine.</p><p>This <strong>breaks</strong> the concept of a universally uniform time in a simulation:</p><blockquote><p>The concept of a unique global clock is not meaningful in the context of a distributed system of self-contained parallel agents. ...</p><p>... a unique (linear) global time is not definable. ...</p><p>This is not to imply that it is impossible to construct a distributed system whose behavior is such that the elements of the system can be abstractly construed as acting synchronously. ... Assume one element, called the global master, controls when each of the elements in the system may continue; ...</p><p>The important point to be made is that any such global synchronization creates a bottleneck which can be extremely inefficient in the context of a distributed environment. <sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup></p></blockquote><p>In a distributed system we must find a compromise between maintaining a global order of events and being able to do efficient local computations. The key insight is that not all events in a discrete event system have strong causal relations with each other and therefore not all events need to be tightly synchronized.</p><h2 id="Thread-local-Time"><a class="docs-heading-anchor" href="#Thread-local-Time">Thread-local Time</a><a id="Thread-local-Time-1"></a><a class="docs-heading-anchor-permalink" href="#Thread-local-Time" title="Permalink"></a></h2><p><code>DiscreteEvents</code> introduces parallel clocks with <em>thread local time</em>. It maintains <em>partial orderings of events</em> on each thread. By synchronizing the parallel clocks each given time interval <span>$ϵ$</span> it ensures that for all parallel clocks <span>$C_i, C_j: |t_i - t_j| &lt; ϵ$</span>.</p><p>It is up to the user to take care that associated events or entities from subsystems in a DES get grouped together to run on a thread. Thus causal relations get maintained locally.</p><p>In reality subsystems of DES are often decoupled by buffers or queues:</p><ul><li>In factories there are buffers between different sections of the fabrication process,</li><li>in hospitals an operating room is decoupled from wards by a preparation area,</li><li>in traffic systems there are crossways to join and to separate different urban zones from each other,</li><li>in product development different sub-projects are (or should be) separated from each other by time buffers ...</li></ul><p>Those decouplings are natural interfaces between subsystems and can be used to distribute a model over multiple threads.</p><h3 id="Parallel-efficiency"><a class="docs-heading-anchor" href="#Parallel-efficiency">Parallel efficiency</a><a id="Parallel-efficiency-1"></a><a class="docs-heading-anchor-permalink" href="#Parallel-efficiency" title="Permalink"></a></h3><ul><li>number of threads to use,</li><li>relieving thread 1</li></ul><p>see the chapter in performance</p><h3 id="Thread-safety"><a class="docs-heading-anchor" href="#Thread-safety">Thread safety</a><a id="Thread-safety-1"></a><a class="docs-heading-anchor-permalink" href="#Thread-safety" title="Permalink"></a></h3><ul><li>using random numbers on parallel threads,</li><li>avoid shared variables,</li></ul><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a>Gul Agha: Actors, A Model of Concurrent Computation in Distributed Systems.- 1986, MIT Press, 9ff</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../performance/">« Performance</a><a class="docs-footer-nextpage" href="../benchmarks/">Benchmarks »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 14 September 2020 16:18">Monday 14 September 2020</span>. Using Julia version 1.5.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
