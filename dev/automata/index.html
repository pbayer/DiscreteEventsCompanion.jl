<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Automata Â· DiscreteEventsCompanion.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">DiscreteEventsCompanion.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../DES/">Overview</a></li><li><a class="tocitem" href="../clocks/">Clocks</a></li><li><a class="tocitem" href="../actions/">Actions</a></li><li><a class="tocitem" href="../sampling/">Sampling</a></li><li><a class="tocitem" href="../events/">Events</a></li><li><a class="tocitem" href="../activities/">Activities</a></li><li><a class="tocitem" href="../processes/">Processes</a></li><li><a class="tocitem" href="../random/">Randomness</a></li><li class="is-active"><a class="tocitem" href>Automata</a></li><li><a class="tocitem" href="../actors/">Actors</a></li><li><a class="tocitem" href="../models/">Models</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../examples/examples/">Overview</a></li><li><a class="tocitem" href="../examples/singleserver/">Single Server</a></li><li><a class="tocitem" href="../examples/tabletennis/">Table Tennis</a></li><li><a class="tocitem" href="../examples/queue_mmc_act/">M/M/c Activities</a></li><li><a class="tocitem" href="../examples/queue_mmc_srv/">M/M/c Processes</a></li><li><a class="tocitem" href="../examples/queue_mmc_actor/">M/M/c Actors</a></li><li><a class="tocitem" href="../examples/house_heating/house_heating/">House Heating</a></li><li><a class="tocitem" href="../examples/postoffice/postoffice/">Post Office</a></li><li><a class="tocitem" href="../examples/dicegame/dicegame/">Goldratt&#39;s Dice Game</a></li></ul></li><li><a class="tocitem" href="../performance/">Performance</a></li><li><a class="tocitem" href="../parallel/">Parallel Simulation</a></li><li><a class="tocitem" href="../benchmarks/">Benchmarks</a></li><li><a class="tocitem" href="../diag/">Diagnosis</a></li><li><a class="tocitem" href="../internals/">Internals</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Automata</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Automata</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/pbayer/DiscreteEventsCompanion.jl/blob/master/docs/src/automata.md" title="Edit on GitHub"><span class="docs-icon fab">ï‚›</span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Automata"><a class="docs-heading-anchor" href="#Automata">Automata</a><a id="Automata-1"></a><a class="docs-heading-anchor-permalink" href="#Automata" title="Permalink"></a></h1><p>Automata are also called state machines or the state-based approach to simulation.</p><p>In the definition of a <a href="../DES/">stochastic timed automaton</a> <span>$\Gamma(x)$</span> expresses the fact that transitions are conditional on states or that in a given state <span>$x$</span> only certain events <span>$\Gamma(x) \subseteq \mathcal{E}$</span> cause a transition. The transition function <span>$\mathcal{f}:\mathcal{X}\times\mathcal{E} \rightarrow \mathcal{X}$</span> therefore is only partially defined on its domain. In stochastic systems event sequences change unpredictably and can lead to undefined combinations <span>$(x,e)$</span> that must be handled somehow.</p><p>Julia&#39;s <a href="https://docs.julialang.org/en/v1/manual/methods/#Methods-1">multiple dispatch</a> provides a powerful way to implement the transition function <span>$\mathcal{f}$</span>:</p><ol><li>define the event set <span>$\,\mathcal{E} = \{\alpha, \beta, \gamma, ...\}$</span>,</li><li>define the state space <span>$\,\mathcal{X}=\{x_1, x_2, ..., x_n\}$</span>,</li><li>implement methods for the defined transitions <span>$\,\mathcal{f}(x_1, \{\alpha,\beta\}), \mathcal{f}(x_2, \gamma), ..., \mathcal{f}(x_n, \omega)$</span>,</li><li>define a default transition <span>$\,\mathcal{f}(\mathcal{X},\mathcal{E})=\text{\O}\,$</span>.</li></ol><p>Defined transitions call one of the defined methods and undefined transitions fallback to the default transition. This eliminates the need to check for and delete previously scheduled events. Unfeasible events are simply ignored.</p><h3 id="A-server-breaks-down"><a class="docs-heading-anchor" href="#A-server-breaks-down">A server breaks down</a><a id="A-server-breaks-down-1"></a><a class="docs-heading-anchor-permalink" href="#A-server-breaks-down" title="Permalink"></a></h3><p>If a server <code>s</code> breaks down randomly, it has state <code>Failed</code> and cannot accept previously scheduled events <code>Finish</code> or <code>Setup</code> (a job). With correctly defined  transition functions <code>ğ’‡!(s,Busy,Finish)</code> and <code>ğ’‡!(s,ğ‘‹,ğ¸) = âˆ…</code>, the event <code>ğ’‡!(s,Failed,Finish)</code> triggers <code>nothing</code> <sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup>. Code example:</p><pre><code class="language-julia">abstract type ğ‘‹ end    # define states
struct Idle &lt;: ğ‘‹ end
struct Busy &lt;: ğ‘‹ end
struct Failed &lt;: ğ‘‹ end

abstract type ğ¸ end    # describe events
struct Setup &lt;: ğ¸ end
struct Load &lt;: ğ¸ end
struct Finish &lt;: ğ¸ end
struct Fail &lt;: ğ¸ end
struct Repair &lt;: ğ¸ end

mutable struct Server  # state machine body
    id::Int
    c::Clock
    state::ğ‘‹
    job::Int
end

# defined transitions
ğ’‡!(::Server, ::ğ‘‹, ::ğ¸) = nothing   # default transition
ğ’‡!(s::Server, ::Idle, ::Setup) = event!(s.c, fun(ğ’‡!, s, s.state, Load()), fun(isready, queue))
function ğ’‡!(s::Server, ::Idle, ::Load)
    s.job = pop!(queue)
    s.state = Busy()
    event!(s.c, fun(ğ’‡!, s, s.state, Finish()), after, rand(EX))
end
function ğ’‡!(s::Server, ::ğ‘‹, ::Fail)
    s.state = Failed()
    event!(s.c, fun(ğ’‡!, s, s.state, Repair(), after, rand(MTTR)))
end
function ğ’‡!(s::Server, ::Busy, ::Finish)
    pushfirst!(done, s.job)
    s.job = 0
    s.state = Idle()
    event!(s.c, fun(ğ’‡!, s, s.state, Setup(), after, rand(EX)/5))
end
function ğ’‡!(s::Server, ::Failed, ::Repair)
    if s.job != 0
        s.state = Busy()
        event!(s.c, fun(ğ’‡!, s, s.state, Finish()), after, rand(ex)) # start job anew
    else
        s.state = Idle()
        event!(s.c, fun(ğ’‡!, s, s.state, Setup(), after, rand(EX)/5))
    end
end

...</code></pre><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a>Here we include the server <code>s</code> as function argument. But then - since we change the argument - it is Julia convention to add an exclamation point (<code>!</code>) to the function name.</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../random/">Â« Randomness</a><a class="docs-footer-nextpage" href="../actors/">Actors Â»</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 23 July 2020 19:18">Thursday 23 July 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
