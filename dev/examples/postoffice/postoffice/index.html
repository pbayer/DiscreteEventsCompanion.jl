<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Post Office ¬∑ DiscreteEventsCompanion.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">DiscreteEventsCompanion.jl</span></div><form class="docs-search" action="../../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../../../DES/">Discrete Event Systems</a></li><li><a class="tocitem" href="../../../clocks/">Clocks</a></li><li><a class="tocitem" href="../../../actions/">Actions</a></li><li><a class="tocitem" href="../../../sampling/">Sampling</a></li><li><a class="tocitem" href="../../../events/">Events</a></li><li><a class="tocitem" href="../../../activities/">Activities</a></li><li><a class="tocitem" href="../../../processes/">Processes</a></li><li><a class="tocitem" href="../../../random/">Randomness</a></li><li><a class="tocitem" href="../../../automata/">State Machines</a></li><li><a class="tocitem" href="../../../actors/">Actors</a></li><li><a class="tocitem" href="../../../models/">Models</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/">Overview</a></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Introductory</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../singleserver/">Single Server</a></li><li><a class="tocitem" href="../../tabletennis/">Table Tennis</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">M/M/c Queue</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../queue_mmc_act/">M/M/c Activities</a></li><li><a class="tocitem" href="../../queue_mmc_srv/">M/M/c Processes</a></li><li><a class="tocitem" href="../../queue_mmc_sm/">M/M/c State Machines</a></li><li><a class="tocitem" href="../../queue_mmc_actor/">M/M/c Actors</a></li><li><a class="tocitem" href="../../queue_mmc_srv_fail/">M/M/c Interrupted Processes</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-4" type="checkbox"/><label class="tocitem" for="menuitem-3-4"><span class="docs-label">Multi-Threading (Experimental)</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../assy_thrd/">Assembly Line</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-5" type="checkbox" checked/><label class="tocitem" for="menuitem-3-5"><span class="docs-label">Other</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../house_heating/house_heating/">House Heating</a></li><li class="is-active"><a class="tocitem" href>Post Office</a><ul class="internal"><li><a class="tocitem" href="#Conclusion"><span>Conclusion</span></a></li></ul></li><li><a class="tocitem" href="../../dicegame/dicegame/">Goldratt&#39;s Dice Game</a></li></ul></li></ul></li><li><a class="tocitem" href="../../../performance/">Performance</a></li><li><a class="tocitem" href="../../../parallel/">Parallel Simulation</a></li><li><a class="tocitem" href="../../../benchmarks/">Benchmarks</a></li><li><a class="tocitem" href="../../../diag/">Diagnosis</a></li><li><a class="tocitem" href="../../../internals/">Internals</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li><a class="is-disabled">Other</a></li><li class="is-active"><a href>Post Office</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Post Office</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/pbayer/DiscreteEventsCompanion.jl/blob/master/docs/src/examples/postoffice/postoffice.md" title="Edit on GitHub"><span class="docs-icon fab">ÔÇõ</span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="A-Post-Office-‚Äì-A-Real-Life-Story"><a class="docs-heading-anchor" href="#A-Post-Office-‚Äì-A-Real-Life-Story">A Post Office ‚Äì A Real Life Story</a><a id="A-Post-Office-‚Äì-A-Real-Life-Story-1"></a><a class="docs-heading-anchor-permalink" href="#A-Post-Office-‚Äì-A-Real-Life-Story" title="Permalink"></a></h1><p><em>Paul Bayer, 2020-09-14, v0.4</em></p><p>Let us begin with an everyday story: there is a small post office with one clerk serving the arriving customers. Customers have differing wishes leading to different serving times, from <code>1 - 5 minutes</code>. We have to add a little variation to serving times counting for variation in customer habits and clerk performance. The arrival rate of customers is about 18 per hour, every <code>3.33 minutes</code> or <code>3 minutes, 20 seconds</code> on average. Our post office is small and customer patience is limited, so queue length is limited to 5 customers. </p><p>We have provided 10% extra capacity, so our expectation is that there should not be too many customers discouraged for long waiting times or for full queues.</p><p><img src="../PostOffice.png" alt="post office"/></p><p>Let&#39;s do a process-based simulation using <a href="https://github.com/pbayer/DiscreteEvents.jl"><code>DiscreteEvents</code></a>. We need </p><ol><li>a source: all the <strong>people</strong>, providing an unlimited supply for customers,</li><li><strong>customers</strong> with their demands and their limited patience,</li><li>a <strong>queue</strong> and</li><li>our good old <strong>clerk</strong>.</li></ol><p>First we must load the needed modules, describe a customer and define some needed helper functions. </p><pre><code class="language-julia">using DiscreteEvents, Random, Distributions, DataFrames

mutable struct Customer
    id::Int64
    arrival::Float64
    request::Int64

    Customer(n::Int64, arrival::Float64) = new(n, arrival, rand(DiscreteUniform(1, 5)))
end

full(q::Channel) = length(q.data) &gt;= q.sz_max
logevent(nr, queue::Channel, info::AbstractString, wt::Number) =
    push!(df, (round(tau(), digits=2), nr, length(queue.data), info, wt))</code></pre><pre><code class="language-none">logevent (generic function with 1 method)</code></pre><p>Then we define functions for our processes: people and clerk.</p><pre><code class="language-julia">function people(clk::Clock, output::Channel, Œ≤::Float64)
    i = 1
    while true
        Œît = rand(Exponential(Œ≤))
        delay!(clk, Œît)
        if !full(output)
            put!(output, Customer(i, tau(clk)))
            logevent(i, output, &quot;enqueues&quot;, 0)
         else
            logevent(i, output, &quot;leaves - queue is full!&quot;, -1)
        end
        i += 1
    end
end

function clerk(clk::Clock, input::Channel)
    cust = take!(input)
    Œît = cust.request + randn()*0.2
    logevent(cust.id, input, &quot;now being served&quot;, tau(clk) - cust.arrival)
    delay!(clk, Œît)
    logevent(cust.id, input, &quot;leaves&quot;, tau(clk) - cust.arrival)
end</code></pre><pre><code class="language-none">clerk (generic function with 1 method)</code></pre><p>Then we have to create out data, register and startup the processes:</p><pre><code class="language-julia">resetClock!(ùê∂)  # for repeated runs it is easier if we reset our central clock here
Random.seed!(2019)  # seed random number generator for reproducibility
queue = Channel(5)  # thus we determine the max size of the queue

df = DataFrame(time=Float64[], cust=Int[], qlen=Int64[], status=String[], wtime=Float64[])

process!(Prc(1, people, queue, 3.333)) # register the functions as processes
process!(Prc(2, clerk, queue))</code></pre><pre><code class="language-none">2</code></pre><p>Then we can simply run the simulation. We assume our time unit being minutes, so we run for 600 units:</p><pre><code class="language-julia">println(run!(ùê∂, 600))
println(&quot;$(length(queue.data)) customers yet in queue&quot;)</code></pre><pre><code class="language-none">run! finished with 348 clock events, 0 sample steps, simulation time: 600.0
0 customers yet in queue</code></pre><p>Our table has registered it all:</p><pre><code class="language-julia">df</code></pre><p>&lt;table class=&quot;data-frame&quot;&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th&gt;time&lt;/th&gt;&lt;th&gt;cust&lt;/th&gt;&lt;th&gt;qlen&lt;/th&gt;&lt;th&gt;status&lt;/th&gt;&lt;th&gt;wtime&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th&gt;Float64&lt;/th&gt;&lt;th&gt;Int64&lt;/th&gt;&lt;th&gt;Int64&lt;/th&gt;&lt;th&gt;String&lt;/th&gt;&lt;th&gt;Float64&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;p&gt;518 rows √ó 5 columns&lt;/p&gt;&lt;tr&gt;&lt;th&gt;1&lt;/th&gt;&lt;td&gt;1.2&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;enqueues&lt;/td&gt;&lt;td&gt;0.0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;2&lt;/th&gt;&lt;td&gt;1.2&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;now being served&lt;/td&gt;&lt;td&gt;0.0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;3&lt;/th&gt;&lt;td&gt;2.42&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;leaves&lt;/td&gt;&lt;td&gt;1.22333&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;4&lt;/th&gt;&lt;td&gt;14.46&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;enqueues&lt;/td&gt;&lt;td&gt;0.0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;5&lt;/th&gt;&lt;td&gt;14.46&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;now being served&lt;/td&gt;&lt;td&gt;0.0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;6&lt;/th&gt;&lt;td&gt;15.33&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;leaves&lt;/td&gt;&lt;td&gt;0.869507&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;7&lt;/th&gt;&lt;td&gt;15.59&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;enqueues&lt;/td&gt;&lt;td&gt;0.0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;8&lt;/th&gt;&lt;td&gt;15.59&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;now being served&lt;/td&gt;&lt;td&gt;0.0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;9&lt;/th&gt;&lt;td&gt;16.03&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;enqueues&lt;/td&gt;&lt;td&gt;0.0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;10&lt;/th&gt;&lt;td&gt;17.8&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;leaves&lt;/td&gt;&lt;td&gt;2.20916&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;11&lt;/th&gt;&lt;td&gt;17.8&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;now being served&lt;/td&gt;&lt;td&gt;1.76564&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;12&lt;/th&gt;&lt;td&gt;23.05&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;leaves&lt;/td&gt;&lt;td&gt;7.01425&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;13&lt;/th&gt;&lt;td&gt;27.45&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;enqueues&lt;/td&gt;&lt;td&gt;0.0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;14&lt;/th&gt;&lt;td&gt;27.45&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;now being served&lt;/td&gt;&lt;td&gt;0.0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;15&lt;/th&gt;&lt;td&gt;27.5&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;enqueues&lt;/td&gt;&lt;td&gt;0.0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;16&lt;/th&gt;&lt;td&gt;30.71&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;enqueues&lt;/td&gt;&lt;td&gt;0.0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;17&lt;/th&gt;&lt;td&gt;32.32&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;leaves&lt;/td&gt;&lt;td&gt;4.86645&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;18&lt;/th&gt;&lt;td&gt;32.32&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;now being served&lt;/td&gt;&lt;td&gt;4.81794&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;19&lt;/th&gt;&lt;td&gt;35.49&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;leaves&lt;/td&gt;&lt;td&gt;7.99158&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;20&lt;/th&gt;&lt;td&gt;35.49&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;now being served&lt;/td&gt;&lt;td&gt;4.77958&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;21&lt;/th&gt;&lt;td&gt;35.73&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;enqueues&lt;/td&gt;&lt;td&gt;0.0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;22&lt;/th&gt;&lt;td&gt;37.47&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;enqueues&lt;/td&gt;&lt;td&gt;0.0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;23&lt;/th&gt;&lt;td&gt;38.26&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;leaves&lt;/td&gt;&lt;td&gt;7.54359&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;24&lt;/th&gt;&lt;td&gt;38.26&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;now being served&lt;/td&gt;&lt;td&gt;2.5265&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;25&lt;/th&gt;&lt;td&gt;41.92&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;leaves&lt;/td&gt;&lt;td&gt;6.1911&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;26&lt;/th&gt;&lt;td&gt;41.92&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;now being served&lt;/td&gt;&lt;td&gt;4.44906&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;27&lt;/th&gt;&lt;td&gt;42.26&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;enqueues&lt;/td&gt;&lt;td&gt;0.0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;28&lt;/th&gt;&lt;td&gt;44.22&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;leaves&lt;/td&gt;&lt;td&gt;6.74951&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;29&lt;/th&gt;&lt;td&gt;44.22&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;now being served&lt;/td&gt;&lt;td&gt;1.96307&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;30&lt;/th&gt;&lt;td&gt;45.62&lt;/td&gt;&lt;td&gt;11&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;enqueues&lt;/td&gt;&lt;td&gt;0.0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;&amp;vellip;&lt;/th&gt;&lt;td&gt;&amp;vellip;&lt;/td&gt;&lt;td&gt;&amp;vellip;&lt;/td&gt;&lt;td&gt;&amp;vellip;&lt;/td&gt;&lt;td&gt;&amp;vellip;&lt;/td&gt;&lt;td&gt;&amp;vellip;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;</p><pre><code class="language-julia">last(df, 5)</code></pre><p>&lt;table class=&quot;data-frame&quot;&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th&gt;time&lt;/th&gt;&lt;th&gt;cust&lt;/th&gt;&lt;th&gt;qlen&lt;/th&gt;&lt;th&gt;status&lt;/th&gt;&lt;th&gt;wtime&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th&gt;Float64&lt;/th&gt;&lt;th&gt;Int64&lt;/th&gt;&lt;th&gt;Int64&lt;/th&gt;&lt;th&gt;String&lt;/th&gt;&lt;th&gt;Float64&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;p&gt;5 rows √ó 5 columns&lt;/p&gt;&lt;tr&gt;&lt;th&gt;1&lt;/th&gt;&lt;td&gt;592.49&lt;/td&gt;&lt;td&gt;177&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;now being served&lt;/td&gt;&lt;td&gt;2.89088&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;2&lt;/th&gt;&lt;td&gt;594.74&lt;/td&gt;&lt;td&gt;178&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;enqueues&lt;/td&gt;&lt;td&gt;0.0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;3&lt;/th&gt;&lt;td&gt;595.95&lt;/td&gt;&lt;td&gt;177&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;leaves&lt;/td&gt;&lt;td&gt;6.35064&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;4&lt;/th&gt;&lt;td&gt;595.95&lt;/td&gt;&lt;td&gt;178&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;now being served&lt;/td&gt;&lt;td&gt;1.21605&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;5&lt;/th&gt;&lt;td&gt;598.03&lt;/td&gt;&lt;td&gt;178&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td&gt;leaves&lt;/td&gt;&lt;td&gt;3.29656&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;</p><pre><code class="language-julia">describe(df[df[!, :wtime] .&gt; 0, :wtime])</code></pre><pre><code class="language-none">Summary Stats:
Length:         314
Missing Count:  0
Mean:           7.326661
Minimum:        0.070575
1st Quartile:   3.690368
Median:         6.139574
3rd Quartile:   9.958741
Maximum:        23.627103
Type:           Float64</code></pre><p>In <span>$600$</span> minutes simulation time, we registered <span>$178$</span> customers and <span>$518$</span> status changes. The mean and median waiting times were around <span>$7$</span> minutes.</p><pre><code class="language-julia">by(df, :status, df -&gt; size(df, 1))</code></pre><p>&lt;table class=&quot;data-frame&quot;&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th&gt;status&lt;/th&gt;&lt;th&gt;x1&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th&gt;String&lt;/th&gt;&lt;th&gt;Int64&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;p&gt;4 rows √ó 2 columns&lt;/p&gt;&lt;tr&gt;&lt;th&gt;1&lt;/th&gt;&lt;td&gt;enqueues&lt;/td&gt;&lt;td&gt;170&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;2&lt;/th&gt;&lt;td&gt;now being served&lt;/td&gt;&lt;td&gt;170&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;3&lt;/th&gt;&lt;td&gt;leaves&lt;/td&gt;&lt;td&gt;170&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;4&lt;/th&gt;&lt;td&gt;leaves - queue is full!&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;</p><p>Of the <span>$178$</span> customers, <span>$170$</span> of them participated in the whole process and were served, but <span>$8$</span> left beforehand because the queue was full: </p><pre><code class="language-julia">df[df.wtime .&lt; 0,:]</code></pre><p>&lt;table class=&quot;data-frame&quot;&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th&gt;time&lt;/th&gt;&lt;th&gt;cust&lt;/th&gt;&lt;th&gt;qlen&lt;/th&gt;&lt;th&gt;status&lt;/th&gt;&lt;th&gt;wtime&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;&lt;/th&gt;&lt;th&gt;Float64&lt;/th&gt;&lt;th&gt;Int64&lt;/th&gt;&lt;th&gt;Int64&lt;/th&gt;&lt;th&gt;String&lt;/th&gt;&lt;th&gt;Float64&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;p&gt;8 rows √ó 5 columns&lt;/p&gt;&lt;tr&gt;&lt;th&gt;1&lt;/th&gt;&lt;td&gt;134.96&lt;/td&gt;&lt;td&gt;36&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;leaves - queue is full!&lt;/td&gt;&lt;td&gt;-1.0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;2&lt;/th&gt;&lt;td&gt;140.39&lt;/td&gt;&lt;td&gt;38&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;leaves - queue is full!&lt;/td&gt;&lt;td&gt;-1.0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;3&lt;/th&gt;&lt;td&gt;166.69&lt;/td&gt;&lt;td&gt;47&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;leaves - queue is full!&lt;/td&gt;&lt;td&gt;-1.0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;4&lt;/th&gt;&lt;td&gt;169.14&lt;/td&gt;&lt;td&gt;49&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;leaves - queue is full!&lt;/td&gt;&lt;td&gt;-1.0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;5&lt;/th&gt;&lt;td&gt;169.2&lt;/td&gt;&lt;td&gt;50&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;leaves - queue is full!&lt;/td&gt;&lt;td&gt;-1.0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;6&lt;/th&gt;&lt;td&gt;212.92&lt;/td&gt;&lt;td&gt;64&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;leaves - queue is full!&lt;/td&gt;&lt;td&gt;-1.0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;7&lt;/th&gt;&lt;td&gt;237.76&lt;/td&gt;&lt;td&gt;72&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;leaves - queue is full!&lt;/td&gt;&lt;td&gt;-1.0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;8&lt;/th&gt;&lt;td&gt;575.38&lt;/td&gt;&lt;td&gt;172&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;leaves - queue is full!&lt;/td&gt;&lt;td&gt;-1.0&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;</p><pre><code class="language-julia">using PyPlot
step(df.time, df.wtime)
step(df.time, df.qlen)
axhline(y=0, color=&quot;k&quot;)
grid()
xlabel(&quot;time [min]&quot;)
ylabel(&quot;wait time [min], queue length&quot;)
title(&quot;Waiting Time in the Post Office&quot;)
legend([&quot;wait_time&quot;, &quot;queue_len&quot;]);</code></pre><p><img src="../output_17_0.png" alt="png"/></p><p>Many customers had waiting times of more than 10, 15 up to even more than 20 minutes. The negative waiting times were the 5 customers, which left because the queue was full.</p><p>So many customers will remain angry. If this is the situation all days, our post office will have an evil reputation. What should we do?</p><h2 id="Conclusion"><a class="docs-heading-anchor" href="#Conclusion">Conclusion</a><a id="Conclusion-1"></a><a class="docs-heading-anchor-permalink" href="#Conclusion" title="Permalink"></a></h2><p>Even if our process runs within predetermined bounds (queue length, customer wishes ‚Ä¶), it seems to fluctuate wildly and to produce unpredicted effects. We see here the <strong>effects of variation</strong> in arrivals, in demands and in serving time on system performance. In this case 10% extra capacity is not enough to provide enough buffer for variation and for customer service ‚Äì even if our post clerk is the most willing person.</p><p>Even for such a simple everyday system, we cannot say beforehand ‚Äì without reality check ‚Äì which throughput, waiting times, mean queue length, capacity utilization or customer satisfaction will emerge. Even more so for more complicated systems in production, service, projects and supply chains with multiple dependencies.</p><p>If we had known the situation beforehand, we could have provided standby for our clerk or install an automatic stamp dispenser for cutting the short tasks ‚Ä¶ </p><p>We should have done a simulation. We should have known <code>DiscreteEvents</code> before ‚Ä¶  üòÑ</p><pre><code class="language-julia"></code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../house_heating/house_heating/">¬´ House Heating</a><a class="docs-footer-nextpage" href="../../dicegame/dicegame/">Goldratt&#39;s Dice Game ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 14 September 2020 16:18">Monday 14 September 2020</span>. Using Julia version 1.5.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
