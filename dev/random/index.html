<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Randomness ¬∑ DiscreteEventsCompanion.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">DiscreteEventsCompanion.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Overview</a></li><li><a class="tocitem" href="../clocks/">Clocks</a></li><li><a class="tocitem" href="../events/">Events</a></li><li><a class="tocitem" href="../processes/">Processes</a></li><li class="is-active"><a class="tocitem" href>Randomness</a><ul class="internal"><li><a class="tocitem" href="#Automata"><span>Automata</span></a></li><li><a class="tocitem" href="#Random-variables"><span>Random variables</span></a></li></ul></li><li><a class="tocitem" href="../models/">Modeling</a></li><li><a class="tocitem" href="../hybrid/">A hybrid system</a></li><li><a class="tocitem" href="../examples/examples/">Examples</a></li><li><a class="tocitem" href="../performance/">Performance</a></li><li><a class="tocitem" href="../parallel/">Parallel simulations</a></li><li><a class="tocitem" href="../benchmarks/">Benchmarks</a></li><li><a class="tocitem" href="../internals/">Internals</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Randomness</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Randomness</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/pbayer/DiscreteEventsCompanion.jl/blob/master/docs/src/random.md" title="Edit on GitHub"><span class="docs-icon fab">ÔÇõ</span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Randomness"><a class="docs-heading-anchor" href="#Randomness">Randomness</a><a id="Randomness-1"></a><a class="docs-heading-anchor-permalink" href="#Randomness" title="Permalink"></a></h1><p>The elements introduced so far (clocks, events and processes) let us describe event sequences in discrete event systems (DES). In reality those sequences often show considerable randomness and come out starkly different with varying initial conditions or intervening random events.   </p><p>If we are interested in the stochastic nature of DES, we can follow Cassandras <sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup> and model them as stochastic timed automata <span>$(\mathcal{E},\mathcal{X},\Gamma,p,p_0,G)$</span> where</p><div>\[\begin{array}{rl}
  \mathcal{E} &amp; \textrm{countable event set} \\
  \mathcal{X} &amp; \textrm{countable state space} \\
  \Gamma(x)   &amp; \textrm{feasible or enabled events}: x \in \mathcal{X}, \Gamma(x) \subseteq \mathcal{E} \\
  p(x&#39;;x,e&#39;)  &amp; \textrm{state transition probability}: x,x&#39; \in \mathcal{X}, e&#39; \in \mathcal{E} \\
  p_0(x)      &amp; \textrm{pmf}\ P[X_0=x]: x \in \mathcal{X}, X_o \textrm{initial state} \\
  G_i         &amp; \textrm{stochastic clock structure}: i \in \mathcal{E}
\end{array}\]</div><p>Everything in this definition can be expressed by combining</p><ul><li>clock, events and processes of <code>DiscreteEvents</code>,</li><li>Julia&#39;s <a href="https://docs.julialang.org/en/v1/manual/methods/#Methods-1">multiple dispatch</a> and</li><li>using the <a href="https://github.com/JuliaStats/Distributions.jl"><code>Distributions</code></a> package.</li></ul><h2 id="Automata"><a class="docs-heading-anchor" href="#Automata">Automata</a><a id="Automata-1"></a><a class="docs-heading-anchor-permalink" href="#Automata" title="Permalink"></a></h2><p>The feasible event function <span>$\Gamma(x)$</span> expresses the fact that events are conditional on states or that in a given state <span>$x$</span> only certain events <span>$\Gamma(x) \subseteq \mathcal{E}$</span> can happen. The transition function <span>$\mathcal{f}:\mathcal{X}\times\mathcal{E} \rightarrow \mathcal{X}$</span> is only partially defined on the domain <span>$\mathcal{X}\times\mathcal{E}$</span>.</p><p>Julia&#39;s multiple dispatch provides a powerful way to implement the transition function <span>$\mathcal{f}$</span>.</p><p>The process to do it is:</p><ol><li>define the event set <span>$\,\mathcal{E} = \{\alpha, \beta, \gamma, ...\}$</span>,</li><li>define the state space <span>$\,\mathcal{X}=\{x_1, x_2, ..., x_n\}$</span>,</li><li>define the transition function <span>$\mathcal{f}$</span> as multiple methods <span>$\,\mathcal{f}(x_1, \{\alpha,\beta\}), \mathcal{f}(x_2, \gamma), ..., \mathcal{f}(x_n, \omega)$</span> ,</li><li>define a default transition <span>$\,\mathcal{f}(\mathcal{X},\mathcal{E})=\text{\O}\,$</span> as one method doing nothing.</li></ol><p>Since Julia specialises its methods on function arguments, it calls the default transition function only if no proper transition is defined. This eliminates the need to check for and delete previously scheduled events.</p><h3 id="A-server-breaks-down"><a class="docs-heading-anchor" href="#A-server-breaks-down">A server breaks down</a><a id="A-server-breaks-down-1"></a><a class="docs-heading-anchor-permalink" href="#A-server-breaks-down" title="Permalink"></a></h3><p>For example if a (modeled) server <code>S</code> breaks down randomly and takes on a state <code>Failed</code>, it cannot accept a previously scheduled event <code>finish_job</code>. If we have defined correctly the transition function <code>ùíá(S, Busy, finish_job)</code> and the default transition function, the event <code>ùíá(S, Failed, finish_job)</code> triggers the default transition and is simply ignored <sup class="footnote-reference"><a id="citeref-2" href="#footnote-2">[2]</a></sup>.</p><pre><code class="language-julia"># to do</code></pre><h2 id="Random-variables"><a class="docs-heading-anchor" href="#Random-variables">Random variables</a><a id="Random-variables-1"></a><a class="docs-heading-anchor-permalink" href="#Random-variables" title="Permalink"></a></h2><p>Random initial states, transition probabilities or random times can simply be computed by calling <code>rand(d)</code> on a <a href="https://juliastats.org/Distributions.jl/stable/types/#Distributions-1">distribution</a> <code>d</code> from the <a href="https://juliastats.org/Distributions.jl/stable/"><code>Distributions</code></a> package.</p><h3 id="Two-poisson-processes"><a class="docs-heading-anchor" href="#Two-poisson-processes">Two poisson processes</a><a id="Two-poisson-processes-1"></a><a class="docs-heading-anchor-permalink" href="#Two-poisson-processes" title="Permalink"></a></h3><p>In the following example we simulate two arrival processes, one homogeneous poisson process (HPP) say for a grocery store and one non-homogeneous poisson process (NHPP) where the number of arrivals diminish over time e.g. for a bakery.</p><pre><code class="language-julia">using DiscreteEvents, Random, Distributions, Plots

Random.seed!(1234)    # set random number seed for reproducibility
const Œª = 10          # arrival rate 10 customers per hour
const œÅ = log(0.2)/10 # decay constant for customer arrivals
D = Exponential(1/Œª)  # interarrival time distribution

hpp  = [0]            # counting homogeneous poisson arrivals
nhpp = [0]            # counting non-homogeneous poisson arrivals
t = Float64[]         # tracing variables
y1 = Int[]
y2 = Int[]

Œ¥(t) = Int(rand() ‚â§ exp(œÅ*t))   # model time dependent decay of arrivals
trace(c) = (push!(t, c.time); push!(y1, hpp[1]); push!(y2, nhpp[1]))

# define two arrival functions
#       |   count             | schedule next arrival
arr1(c) = (hpp[1] += 1;         event!(c, fun(arr1, c), after, rand(D)))
arr2(c) = (nhpp[1]+= Œ¥(c.time); event!(c, fun(arr2, c), after, rand(D)))

# create clock, schedule events and tracing and run
c = Clock()
event!(c, fun(arr1, c), after, rand(D))  # HPP arrivals (grocery store)
event!(c, fun(arr2, c), after, rand(D))  # NHPP (bakery)
periodic!(c, fun(trace, c))
run!(c, 10)

plot(t, y1, label=&quot;grocery&quot;, xlabel=&quot;hours&quot;, ylabel=&quot;customers&quot;, legend=:topleft)
plot!(t, y2, label=&quot;bakery&quot;)</code></pre><p><img src="../img/poisson.png" alt="poisson arrivals"/></p><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a>Cassandras, Lafortune: Introduction to Discrete Event Systems, Springer, 2008, p 334 f.</li><li class="footnote" id="footnote-2"><a class="tag is-link" href="#citeref-2">2</a>In order to be able to use the same transition function for several agents in a DES, it is convenient to include the agent (e.g. the server <code>S</code>) into the function arguments.</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../processes/">¬´ Processes</a><a class="docs-footer-nextpage" href="../models/">Modeling ¬ª</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 21 July 2020 19:19">Tuesday 21 July 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
